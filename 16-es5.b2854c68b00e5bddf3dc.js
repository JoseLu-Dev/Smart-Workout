!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{dhA6:function(t,n,r){"use strict";r.r(n),r.d(n,"EmailVerificationPageModule",function(){return x});var a,o=r("ofXK"),c=r("3Pt+"),l=r("TEn/"),s=r("tyNb"),u=r("fXoL"),f=r("AytR"),m=r("tk/3"),b=((a=function(){function t(i){e(this,t),this.http=i,this.authUrl="".concat(f.a.backendUrl,"/auth"),this.reSendEmailUrl="".concat(this.authUrl,"/reSendVerificationEmail"),this.verifyEmailUrl="".concat(this.authUrl,"/verifyUser")}return i(t,[{key:"reSendVerificationEmail",value:function(e){return this.http.post("".concat(this.reSendEmailUrl),e,{observe:"response"})}},{key:"sendConfirmationEmailCode",value:function(e){return this.http.post("".concat(this.verifyEmailUrl),{confirmationCode:e},{observe:"response"})}}]),t}()).\u0275fac=function(e){return new(e||a)(u.Tb(m.b))},a.\u0275prov=u.Fb({token:a,factory:a.\u0275fac,providedIn:"root"}),a);function d(e,t){1&e&&(u.Pb(0,"label",11),u.zc(1,"\xa0- Invalid Email"),u.Ob())}function h(e,t){1&e&&(u.Pb(0,"p",12),u.zc(1,"No user found with given email"),u.Ob())}var p=function(e){return{"input-invalid":e}},v=function(e){return{"opacity-70":e}};function g(e,t){if(1&e){var i=u.Qb();u.Pb(0,"div"),u.Pb(1,"form",4),u.Xb("ngSubmit",function(){u.sc(i);var e=u.bc();return e.onResendEmailCLicked(e.emailForm.value)}),u.Pb(2,"div",5),u.Pb(3,"label",6),u.zc(4,"Email"),u.Ob(),u.xc(5,d,2,0,"label",7),u.Ob(),u.Kb(6,"input",8),u.xc(7,h,2,0,"p",9),u.Pb(8,"button",10),u.zc(9,"Re send verification email"),u.Ob(),u.Ob(),u.Ob()}if(2&e){var n=u.bc();u.zb(1),u.hc("formGroup",n.emailForm),u.zb(4),u.hc("ngIf",!n.emailForm.get("email").valid&&n.emailForm.get("email").touched),u.zb(1),u.hc("ngClass",u.kc(6,p,!n.emailForm.get("email").valid&&n.emailForm.get("email").touched||n.invalidEmail)),u.zb(1),u.hc("ngIf",n.invalidEmail),u.zb(1),u.hc("disabled",n.emailForm.invalid)("ngClass",u.kc(8,v,n.emailForm.invalid))}}function y(e,t){if(1&e){var i=u.Qb();u.Pb(0,"p",13),u.zc(1," Email confirmed, you can now "),u.Pb(2,"a",14),u.Xb("click",function(){return u.sc(i),u.bc().onGoToLoginClicked()}),u.zc(3,"Log in"),u.Ob(),u.Ob()}}var w,C,E,k=[{path:"",component:(w=function(){function t(i,n,r,a,o){e(this,t),this.formBuilder=i,this.route=n,this.emailVerificationService=r,this.alertCtrl=a,this.router=o,this.invalidEmail=!1,this.emailVerified=!1}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.verificationCode=this.route.snapshot.paramMap.get("code"),this.verificationCode&&this.emailVerificationService.sendConfirmationEmailCode(this.verificationCode).subscribe(function(t){switch(t.status){case 200:e.emailVerified=!0,e.alertCtrl.create({header:"Successfully verified",message:"Email has been successfully verified.",buttons:["OK"]}).then(function(e){return e.present()})}},function(t){switch(t.status){case 404:e.invalidEmail=!0,e.alertCtrl.create({header:"Not suitable",message:"This account is not suitable for activation.",buttons:["OK"]}).then(function(e){return e.present()});break;case 500:e.alertCtrl.create({header:"Server error",message:"An error has occurred, try again later.",buttons:["OK"]}).then(function(e){return e.present()})}}),this.emailForm=this.formBuilder.group({email:["",c.q.compose([c.q.email,c.q.required])]})}},{key:"onResendEmailCLicked",value:function(e){var t=this;this.emailVerificationService.reSendVerificationEmail(e).subscribe(function(e){switch(e.status){case 200:t.alertCtrl.create({header:"Email resend",message:"Email has been resend, please look for it.",buttons:["OK"]}).then(function(e){return e.present()})}},function(e){switch(e.status){case 400:t.alertCtrl.create({header:"Verified",message:"This email has been already verified.",buttons:["OK"]}).then(function(e){return e.present()});break;case 404:t.alertCtrl.create({header:"No email found",message:"There is no user with this email.",buttons:["OK"]}).then(function(e){return e.present()});break;case 500:t.alertCtrl.create({header:"Server error",message:"An error has occurred, try again later.",buttons:["OK"]}).then(function(e){return e.present()})}})}},{key:"onGoToLoginClicked",value:function(){this.router.navigate([""],{replaceUrl:!0})}}]),t}(),w.\u0275fac=function(e){return new(e||w)(u.Jb(c.c),u.Jb(s.a),u.Jb(b),u.Jb(l.a),u.Jb(s.f))},w.\u0275cmp=u.Db({type:w,selectors:[["app-email-verification"]],decls:5,vars:2,consts:[[1,"background","flex","flex-wrap","content-center"],[1,"w-10/12","sm:w-8/12","md:w-6/12","xl:w-4/12","m-auto","my-10","card"],[4,"ngIf","ngIfElse"],["verificationTemplate",""],[1,"mt-6",3,"formGroup","ngSubmit"],[1,"flex"],[1,"label"],["class","label-error",4,"ngIf"],["type","text","formControlName","email","placeholder","Email",1,"mt-4","mb-2","w-full","input",3,"ngClass"],["class","text-red-500 text-base font-bold text-center",4,"ngIf"],["type","submit",1,"w-full","mt-4","btn","btn-blue",3,"disabled","ngClass"],[1,"label-error"],[1,"text-red-500","text-base","font-bold","text-center"],[1,"text-lg","text-center","text"],[1,"ml-2","link","text-lg",3,"click"]],template:function(e,t){if(1&e&&(u.Pb(0,"div",0),u.Pb(1,"div",1),u.xc(2,g,10,10,"div",2),u.xc(3,y,4,0,"ng-template",null,3,u.yc),u.Ob(),u.Ob()),2&e){var i=u.pc(4);u.zb(2),u.hc("ngIf",!t.emailVerified)("ngIfElse",i)}},directives:[o.l,c.r,c.l,c.g,c.b,c.k,c.f,o.j],styles:[""]}),w)}],O=((E=function t(){e(this,t)}).\u0275fac=function(e){return new(e||E)},E.\u0275mod=u.Hb({type:E}),E.\u0275inj=u.Gb({imports:[[s.j.forChild(k)],s.j]}),E),x=((C=function t(){e(this,t)}).\u0275fac=function(e){return new(e||C)},C.\u0275mod=u.Hb({type:C}),C.\u0275inj=u.Gb({imports:[[o.c,c.h,c.p,l.e,O]]}),C)}}])}();