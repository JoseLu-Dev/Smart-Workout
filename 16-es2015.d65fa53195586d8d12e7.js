(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{dhA6:function(e,t,i){"use strict";i.r(t),i.d(t,"EmailVerificationPageModule",function(){return g});var r=i("ofXK"),a=i("3Pt+"),n=i("TEn/"),s=i("tyNb"),l=i("fXoL"),o=i("AytR"),c=i("tk/3");let m=(()=>{class e{constructor(e){this.http=e,this.authUrl=`${o.a.backendUrl}/auth`,this.reSendEmailUrl=`${this.authUrl}/reSendVerificationEmail`,this.verifyEmailUrl=`${this.authUrl}/verifyUser`}reSendVerificationEmail(e){return this.http.post(`${this.reSendEmailUrl}`,e,{observe:"response"})}sendConfirmationEmailCode(e){return this.http.post(`${this.verifyEmailUrl}`,{confirmationCode:e},{observe:"response"})}}return e.\u0275fac=function(t){return new(t||e)(l.Tb(c.b))},e.\u0275prov=l.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function b(e,t){1&e&&(l.Pb(0,"label",11),l.zc(1,"\xa0- Invalid Email"),l.Ob())}function u(e,t){1&e&&(l.Pb(0,"p",12),l.zc(1,"No user found with given email"),l.Ob())}const d=function(e){return{"input-invalid":e}};function h(e,t){if(1&e){const e=l.Qb();l.Pb(0,"div"),l.Pb(1,"form",4),l.Xb("ngSubmit",function(){l.sc(e);const t=l.bc();return t.onResendEmailCLicked(t.emailForm.value)}),l.Pb(2,"div",5),l.Pb(3,"label",6),l.zc(4,"Email"),l.Ob(),l.xc(5,b,2,0,"label",7),l.Ob(),l.Kb(6,"input",8),l.xc(7,u,2,0,"p",9),l.Pb(8,"button",10),l.zc(9,"Re send verification email"),l.Ob(),l.Ob(),l.Ob()}if(2&e){const e=l.bc();l.zb(1),l.hc("formGroup",e.emailForm),l.zb(4),l.hc("ngIf",!e.emailForm.get("email").valid&&e.emailForm.get("email").touched),l.zb(1),l.hc("ngClass",l.kc(5,d,!e.emailForm.get("email").valid&&e.emailForm.get("email").touched||e.invalidEmail)),l.zb(1),l.hc("ngIf",e.invalidEmail),l.zb(1),l.hc("disabled",e.emailForm.invalid)}}function f(e,t){if(1&e){const e=l.Qb();l.Pb(0,"p",13),l.zc(1," Email confirmed, you can now "),l.Pb(2,"a",14),l.Xb("click",function(){return l.sc(e),l.bc().onGoToLoginClicked()}),l.zc(3,"Log in"),l.Ob(),l.Ob()}}const p=[{path:"",component:(()=>{class e{constructor(e,t,i,r,a){this.formBuilder=e,this.route=t,this.emailVerificationService=i,this.alertCtrl=r,this.router=a,this.invalidEmail=!1,this.emailVerified=!1}ngOnInit(){this.verificationCode=this.route.snapshot.paramMap.get("code"),this.verificationCode&&this.emailVerificationService.sendConfirmationEmailCode(this.verificationCode).subscribe(e=>{switch(e.status){case 200:this.emailVerified=!0,this.alertCtrl.create({header:"Successfully verified",message:"Email has been successfully verified.",buttons:["OK"]}).then(e=>e.present())}},e=>{switch(e.status){case 404:this.invalidEmail=!0,this.alertCtrl.create({header:"Not suitable",message:"This account is not suitable for activation.",buttons:["OK"]}).then(e=>e.present());break;case 500:this.alertCtrl.create({header:"Server error",message:"An error has occurred, try again later.",buttons:["OK"]}).then(e=>e.present())}}),this.emailForm=this.formBuilder.group({email:["",a.q.compose([a.q.email,a.q.required])]})}onResendEmailCLicked(e){this.emailVerificationService.reSendVerificationEmail(e).subscribe(e=>{switch(e.status){case 200:this.alertCtrl.create({header:"Email resend",message:"Email has been resend, please look for it.",buttons:["OK"]}).then(e=>e.present())}},e=>{switch(e.status){case 400:this.alertCtrl.create({header:"Verified",message:"This email has been already verified.",buttons:["OK"]}).then(e=>e.present());break;case 404:this.alertCtrl.create({header:"No email found",message:"There is no user with this email.",buttons:["OK"]}).then(e=>e.present());break;case 500:this.alertCtrl.create({header:"Server error",message:"An error has occurred, try again later.",buttons:["OK"]}).then(e=>e.present())}})}onGoToLoginClicked(){this.router.navigate([""],{replaceUrl:!0})}}return e.\u0275fac=function(t){return new(t||e)(l.Jb(a.c),l.Jb(s.a),l.Jb(m),l.Jb(n.a),l.Jb(s.f))},e.\u0275cmp=l.Db({type:e,selectors:[["app-email-verification"]],decls:5,vars:2,consts:[[1,"background","flex","flex-wrap","content-center"],[1,"w-10/12","sm:w-8/12","md:w-6/12","xl:w-4/12","m-auto","my-10","card"],[4,"ngIf","ngIfElse"],["verificationTemplate",""],[1,"mt-6",3,"formGroup","ngSubmit"],[1,"flex"],[1,"label"],["class","label-error",4,"ngIf"],["type","text","formControlName","email","placeholder","Email",1,"mt-4","mb-2","w-full","input",3,"ngClass"],["class","text-red-500 text-base font-bold text-center",4,"ngIf"],["type","submit",1,"w-full","mt-4","btn","btn-blue",3,"disabled"],[1,"label-error"],[1,"text-red-500","text-base","font-bold","text-center"],[1,"text-lg","text-center","text"],[1,"ml-2","link","text-lg",3,"click"]],template:function(e,t){if(1&e&&(l.Pb(0,"div",0),l.Pb(1,"div",1),l.xc(2,h,10,7,"div",2),l.xc(3,f,4,0,"ng-template",null,3,l.yc),l.Ob(),l.Ob()),2&e){const e=l.pc(4);l.zb(2),l.hc("ngIf",!t.emailVerified)("ngIfElse",e)}},directives:[r.l,a.r,a.l,a.g,a.b,a.k,a.f,r.j],styles:[""]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({imports:[[s.j.forChild(p)],s.j]}),e})(),g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({imports:[[r.c,a.h,a.p,n.e,v]]}),e})()}}]);